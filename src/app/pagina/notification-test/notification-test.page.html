<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Prueba de Notificaciones</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-header collapse="condense">
    <ion-toolbar>
      <ion-title size="large">Prueba de Notificaciones</ion-title>
    </ion-toolbar>
  </ion-header>

  <div class="container">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Estado de Notificaciones</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-item>
          <ion-label>Estado de Permisos:</ion-label>
          <ion-badge [color]="permissionStatus === 'granted' ? 'success' : 'warning'">
            {{ permissionStatus }}
          </ion-badge>
        </ion-item>

        <ion-item>
          <ion-label>Inicializado:</ion-label>
          <ion-badge [color]="isInitialized ? 'success' : 'danger'">
            {{ isInitialized ? 'Sí' : 'No' }}
          </ion-badge>
        </ion-item>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-header>
        <ion-card-title>Acciones</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <ion-button expand="block" (click)="requestPermissions()"
                   [disabled]="permissionStatus === 'granted'">
          <ion-icon name="notifications-outline" slot="start"></ion-icon>
          Solicitar Permisos
        </ion-button>

        <ion-button expand="block" (click)="initializeNotifications()"
                   [disabled]="permissionStatus !== 'granted' || isInitialized"
                   color="secondary">
          <ion-icon name="settings-outline" slot="start"></ion-icon>
          Inicializar Notificaciones
        </ion-button>

        <ion-button expand="block" (click)="sendTestNotification()"
                   [disabled]="!isInitialized" color="tertiary">
          <ion-icon name="send-outline" slot="start"></ion-icon>
          Enviar Notificación de Prueba
        </ion-button>

        <ion-button expand="block" (click)="sendCustomNotification()"
                   [disabled]="!isInitialized" color="success">
          <ion-icon name="create-outline" slot="start"></ion-icon>
          Enviar Notificación Personalizada
        </ion-button>
      </ion-card-content>
    </ion-card>

    <ion-card *ngIf="testResult">
      <ion-card-header>
        <ion-card-title>Resultado</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>{{ testResult }}</p>
      </ion-card-content>
    </ion-card>

    <ion-card>
      <ion-card-header>
        <ion-card-title>Información</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>Esta página te permite probar el sistema de notificaciones push de tu aplicación.</p>
        <p><strong>Pasos para probar:</strong></p>
        <ol>
          <li>Solicita permisos de notificaciones</li>
          <li>Inicializa el sistema de notificaciones</li>
          <li>Envía notificaciones de prueba</li>
          <li>Verifica que lleguen a tu dispositivo</li>
        </ol>
        <p><strong>Nota:</strong> Las notificaciones se envían a todos los dispositivos suscritos a tu app de OneSignal.</p>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>

